(this.webpackJsonpmyApp=this.webpackJsonpmyApp||[]).push([[1],{64:function(e,t,n){e.exports=n(93)},70:function(e,t,n){var a={"./ion-action-sheet.entry.js":[95,5],"./ion-alert.entry.js":[96,6],"./ion-app_8.entry.js":[97,7],"./ion-avatar_3.entry.js":[98,17],"./ion-back-button.entry.js":[99,18],"./ion-backdrop.entry.js":[100,43],"./ion-button_2.entry.js":[101,19],"./ion-card_5.entry.js":[102,20],"./ion-checkbox.entry.js":[103,21],"./ion-chip.entry.js":[104,22],"./ion-col_3.entry.js":[105,44],"./ion-datetime_3.entry.js":[106,10],"./ion-fab_3.entry.js":[107,23],"./ion-img.entry.js":[108,45],"./ion-infinite-scroll_2.entry.js":[109,46],"./ion-input.entry.js":[110,24],"./ion-item-option_3.entry.js":[111,25],"./ion-item_8.entry.js":[112,26],"./ion-loading.entry.js":[113,27],"./ion-menu_3.entry.js":[114,28],"./ion-modal.entry.js":[115,8],"./ion-nav_2.entry.js":[116,14],"./ion-popover.entry.js":[117,9],"./ion-progress-bar.entry.js":[118,29],"./ion-radio_2.entry.js":[119,30],"./ion-range.entry.js":[120,31],"./ion-refresher_2.entry.js":[121,11],"./ion-reorder_2.entry.js":[122,16],"./ion-ripple-effect.entry.js":[123,47],"./ion-route_4.entry.js":[124,32],"./ion-searchbar.entry.js":[125,33],"./ion-segment_2.entry.js":[126,34],"./ion-select_3.entry.js":[127,35],"./ion-slide_2.entry.js":[128,48],"./ion-spinner.entry.js":[129,13],"./ion-split-pane.entry.js":[130,49],"./ion-tab-bar_2.entry.js":[131,36],"./ion-tab_2.entry.js":[132,15],"./ion-text.entry.js":[133,37],"./ion-textarea.entry.js":[134,38],"./ion-toast.entry.js":[135,39],"./ion-toggle.entry.js":[136,12],"./ion-virtual-scroll.entry.js":[137,50]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=70,e.exports=r},72:function(e,t,n){var a={"./ion-icon.entry.js":[139,57]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=72,e.exports=r},73:function(e,t,n){},77:function(e,t,n){},88:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(36),i=n.n(o),s=n(7),c=n.n(s),l=n(14),u=n(8),m=n(9),p=n(4),d=n(10),f=n(11),b=n(26),g=n(21),k=n(2),j=function(e){return r.a.createElement(k.m,null,r.a.createElement(k.n,null,e.name),r.a.createElement(k.c,{color:"danger",onClick:function(){return e.deleteGroupMember()}},"\u524a\u9664"))},E=function(e){var t=Object(a.useState)(!1),n=Object(g.a)(t,2),o=n[0],i=n[1],s=Object(a.useState)(!1),c=Object(g.a)(s,2),l=c[0],u=c[1];return Object(k.H)((function(){console.log("willEnter: profile\n",localStorage.taskList)})),r.a.createElement(k.q,null,r.a.createElement(k.j,null,r.a.createElement(k.y,null,r.a.createElement(k.x,null,"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"))),r.a.createElement("div",{className:"ion-padding"},r.a.createElement(k.m,{lines:"none"},r.a.createElement(k.n,null,"\u540d\u524d\uff1a",e.userName),r.a.createElement(k.c,{onClick:function(){return u(!0)}},"\u7de8\u96c6"))),r.a.createElement(k.a,{isOpen:l,onDidDismiss:function(){return u(!1)},header:"\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",buttons:[{text:"\u30ad\u30e3\u30f3\u30bb\u30eb",handler:function(){u(!1)}},{text:"\u5b8c\u4e86",handler:function(t){e.setUserName(t.name)}}],inputs:[{name:"name",type:"text",placeholder:e.userName}]}),r.a.createElement("div",{className:"ion-padding"},r.a.createElement("h3",null,"\u30b0\u30eb\u30fc\u30d7")),r.a.createElement(k.g,{className:"ion-padding"},r.a.createElement(k.l,{placeholder:"\u8ffd\u52a0\u3057\u305f\u3044\u30e1\u30f3\u30d0\u30fc\u306e\u540d\u524d",onIonChange:function(e){i(e.target.value)}}),r.a.createElement(k.c,{expand:"block",onClick:function(){return e.addGroupMember(o)}},"\u8ffd\u52a0"),r.a.createElement(k.o,null,e.groupMember.map((function(t,n){return r.a.createElement(j,{key:n.toString(),name:t,index:n,deleteGroupMember:function(){return e.deleteGroupMember(n)}})})))))},y=function(e){return r.a.createElement(k.m,null,r.a.createElement(k.i,null,r.a.createElement(k.t,null,r.a.createElement("h2",null,e.title)),r.a.createElement(k.t,null,r.a.createElement("p",null,"\u671f\u9650\uff1a",e.limit.replace(/-/g,"/"))),r.a.createElement(k.t,{className:"ion-justify-content-end"},r.a.createElement(k.c,{color:"primary",onClick:function(){e.showModal(),e.setCurrTaskIdx()}},"\u7de8\u96c6"),r.a.createElement(k.c,{color:"success",onClick:function(){return e.completeTask()}},"\u5b8c\u4e86"),r.a.createElement(k.c,{color:"danger",onClick:function(){return e.deleteTask()}},"\u524a\u9664"))))},h=(n(73),n(33));n(74),n(55);function N(e,t,n){return O.apply(this,arguments)}function O(){return(O=Object(l.a)(c.a.mark((function e(t,n,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.a.firestore().collection("notificationList").add({taskType:n,userName:t,taskTitle:a}).then((function(e){console.log("Written with ID: ",e.id)})).catch((function(e){console.log("Cloud firestore Error: ",e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return S.apply(this,arguments)}function S(){return(S=Object(l.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],h.a.firestore().collection("notificationList").where("userName","in",t).get().then((function(e){e.forEach((function(e){n.push(e.data())}))})),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}h.a.initializeApp({apiKey:"AIzaSyDDjOfzmXMiduuonoJfhW9ryCKg7wpX5EI",authDomain:"nucamp-970cd.firebaseapp.com",databaseURL:"https://nucamp-970cd.firebaseio.com",projectId:"nucamp-970cd",storageBucket:"nucamp-970cd.appspot.com",messagingSenderId:"541426173393",appId:"1:541426173393:web:511860241bb155c4308cf0"});var L=function(e){var t=Object(a.useState)(""),n=Object(g.a)(t,2),o=n[0],i=n[1],s=Object(a.useState)(""),c=Object(g.a)(s,2),l=c[0],u=c[1],m=Object(a.useState)(!1),p=Object(g.a)(m,2),d=p[0],f=p[1],b=Object(a.useState)(""),j=Object(g.a)(b,2),E=j[0],h=j[1],O=Object(a.useState)(""),v=Object(g.a)(O,2),S=v[0],L=v[1],M=Object(a.useState)(-1),T=Object(g.a)(M,2),w=T[0],x=T[1];return Object(k.H)((function(){console.log("ionViewWillEnter"),console.log(JSON.parse(localStorage.taskList));var t=JSON.parse(localStorage.taskList),n=new Date,a=n.getFullYear().toString()+(n.getMonth()+1).toString()+n.getDate().toString();t.map((function(n,r){var o=n.limit.replace(/-/g,"");parseInt(o)<parseInt(a)&&(N(e.userName,"expired",n.title),t.splice(r,1))})),console.log(t),e.setTaskList(t)})),r.a.createElement(k.q,null,r.a.createElement(k.j,null,r.a.createElement(k.y,null,r.a.createElement(k.x,null,"\u8ab2\u984c\u30ea\u30b9\u30c8"))),r.a.createElement("div",{className:"ion-padding"},r.a.createElement("h3",null,"\u65b0\u898f\u767b\u9332"),r.a.createElement(k.m,null,r.a.createElement(k.l,{placeholder:"\u8ab2\u984c\u5185\u5bb9",value:o,onIonChange:function(e){return i(e.detail.value)}})),r.a.createElement(k.m,null,r.a.createElement(k.n,{position:"floating"},"\u671f\u9650"),r.a.createElement(k.h,{value:l,displayFormat:"YYYY MM DD",pickerFormat:"YYYY MM DD",max:"2030-01-01",onIonChange:function(e){u(e.detail.value.split("T")[0])}})),r.a.createElement(k.c,{className:"ion-margin-top",color:"primary",expand:"block",onClick:function(){e.addTask(o,l),i(""),u("")}},"\u8ffd\u52a0")),r.a.createElement("div",{className:"ion-padding"},r.a.createElement("h3",null,"\u8ab2\u984c\u30ea\u30b9\u30c8")),r.a.createElement(k.p,{isOpen:d,cssClass:"ion-modal"},r.a.createElement(k.g,{className:"ion-padding ion-margin-bottom"},r.a.createElement(k.m,null,r.a.createElement(k.l,{placeholder:"\u8ab2\u984c\u5185\u5bb9",onIonChange:function(e){return h(e.detail.value)}})),r.a.createElement(k.m,null,r.a.createElement(k.n,{position:"floating"},"\u671f\u9650"),r.a.createElement(k.h,{displayFormat:"YYYY MM DD",pickerFormat:"YYYY MM DD",max:"2030-01-01",onIonChange:function(e){return L(e.detail.value.split("T")[0])}})),r.a.createElement(k.t,{className:"ion-justify-content-end"},r.a.createElement(k.c,{onClick:function(){return f(!1)}},"\u30ad\u30e3\u30f3\u30bb\u30eb"),r.a.createElement(k.c,{onClick:function(){e.editTask(E,S,w),f(!1)}},"\u5b8c\u4e86")))),r.a.createElement(k.g,{className:"ion-padding"},r.a.createElement(k.o,null,e.taskList.map((function(t,n){return r.a.createElement(y,{key:n.toString(),title:t.title,limit:t.limit,deleteTask:function(){return e.deleteTask(n)},remakeTask:function(){return e.remakeTask(n)},completeTask:function(){return e.completeTask(n)},setCurrTaskIdx:function(){return x(n)},showModal:function(){return f(!0)}})})))))},M=(n(77),function(e){var t="",n="".concat(e.name,"\u3055\u3093\u304c\u30bf\u30b9\u30af\u3092\u7d42\u4e86\u3057\u307e\u3057\u305f");return e.name===e.myName&&(t="secondary"),"expired"===e.type&&(t="warning",n="".concat(e.name,"\u3055\u3093\u304c\u30bf\u30b9\u30af\u3092\u7d42\u3048\u3089\u308c\u307e\u305b\u3093\u3067\u3057\u305f")),r.a.createElement(k.d,{className:"ion-padding",color:t},r.a.createElement(k.e,{className:"ion-margin-bottom"},n),r.a.createElement(k.f,null,e.taskTitle))}),T=function(e){var t=Object(a.useState)([]),n=Object(g.a)(t,2),o=n[0],i=n[1];return Object(k.H)(Object(l.a)(c.a.mark((function t(){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.groupMember.length){t.next=9;break}return console.log(e.groupMember),t.next=4,h.a.firestore().collection("notificationList").where("userName","in",e.groupMember).get();case 4:n=t.sent,a=[],n.forEach((function(e){a.push(e.data())})),console.log(a),i(a);case 9:case"end":return t.stop()}}),t)})))),r.a.createElement(k.q,null,r.a.createElement(k.j,null,r.a.createElement(k.y,null,r.a.createElement(k.x,null,"\u901a\u77e5"))),r.a.createElement(k.g,{className:"ion-padding"},r.a.createElement(k.o,null,o.map((function(t,n){return r.a.createElement(M,{key:n.toString(),myName:e.userName,name:t.userName,type:t.taskType,taskTitle:t.taskTitle})})))))},w=n(16),x=(n(78),n(79),n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(58)),_=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var a;Object(u.a)(this,n),(a=t.call(this,e)).showNotiList=function(){console.log(a.state.notificationList)},a.setTaskList=function(e){a.setState({taskList:e}),localStorage.taskList=JSON.stringify(e)},a.setUserName=function(e){a.setState({userName:e});var t=Object.assign([],a.state.groupMember);t[0]=e,a.setState({groupMember:t}),console.log("[info] setUserName",a.state.userName),localStorage.userName=JSON.stringify(e),localStorage.groupMember=JSON.stringify(t)},a.addGroupMember=function(e){var t=Object.assign([],a.state.groupMember);t.push(e),a.setState({groupMember:t}),localStorage.groupMember=JSON.stringify(t),console.log("[info] Add GroupMember")},a.deleteGroupMember=function(e){var t=Object.assign([],a.state.groupMember);t.splice(e,1),a.setState({groupMember:t}),localStorage.groupMember=JSON.stringify(t),console.log("[info] Delete GroupMember")},a.addTask=function(e,t){var n={title:e,limit:t},r=Object.assign([],a.state.taskList);r.push(n),a.setState({taskList:r}),localStorage.taskList=JSON.stringify(r),console.log("[info] addTask\n",a.state.taskList)},a.editTask=function(e,t,n){var r=Object.assign([],a.state.taskList);r[n]={title:e,limit:t},a.setState({taskList:r}),localStorage.taskList=JSON.stringify(r),console.log("[info] editTask")},a.completeTask=function(){var e=Object(l.a)(c.a.mark((function e(t){var n,r,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.assign([],a.state.taskList),r=a.state.userName,"finish",o=n[t].title,e.next=6,N(r,"finish",o);case 6:return n.splice(t,1),a.setState({taskList:n}),localStorage.taskList=JSON.stringify(n),e.next=11,a.updateNotificationList();case 11:i=e.sent,console.log(i);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.deleteTask=function(e){var t=Object.assign([],a.state.taskList);t.splice(e,1),a.setState({taskList:t}),localStorage.taskList=JSON.stringify(t),console.log("[info] deleteTask\n",t)},a.updateNotificationList=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],0===a.state.groupMember.length){e.next=5;break}return e.next=4,v(a.state.groupMember);case 4:t=e.sent;case 5:return console.log("newNotificationList recieved",t),a.setState({notificationList:t}),console.log("[info] uploadNotificationList",a.state.notificationList),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));var r=[],o="",i=[];return"taskList"in localStorage&&(r=JSON.parse(localStorage.taskList)),"userName"in localStorage&&(o=JSON.parse(localStorage.userName)),"groupMember"in localStorage&&(i=JSON.parse(localStorage.groupMember)),a.state={userName:o,taskList:r,groupMember:i,notificationList:[],showModal:!1},a.setTaskList=a.setTaskList.bind(Object(p.a)(a)),a.setUserName=a.setUserName.bind(Object(p.a)(a)),a.addGroupMember=a.addGroupMember.bind(Object(p.a)(a)),a.deleteGroupMember=a.deleteGroupMember.bind(Object(p.a)(a)),a.addTask=a.addTask.bind(Object(p.a)(a)),a.editTask=a.editTask.bind(Object(p.a)(a)),a.completeTask=a.completeTask.bind(Object(p.a)(a)),a.deleteTask=a.deleteTask.bind(Object(p.a)(a)),a.updateNotificationList=a.updateNotificationList.bind(Object(p.a)(a)),a.showNotiList=a.showNotiList.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(k.b,null,r.a.createElement(x.a,null,r.a.createElement(k.w,null,r.a.createElement(k.s,null,r.a.createElement(b.b,{path:"/",render:function(){return r.a.createElement(b.a,{to:"/profile"})},exact:!0}),r.a.createElement(b.b,{path:"/profile",exact:!0,render:function(){return r.a.createElement(E,{userName:e.state.userName,groupMember:e.state.groupMember,addGroupMember:e.addGroupMember,deleteGroupMember:e.deleteGroupMember,setUserName:e.setUserName,taskList:e.state.taskList})}}),r.a.createElement(b.b,{path:"/tasklist",exact:!0,render:function(){return r.a.createElement(L,{setTaskList:e.setTaskList,taskList:e.state.taskList,deleteTask:e.deleteTask,addTask:e.addTask,editTask:e.editTask,completeTask:e.completeTask,userName:e.state.userName})}}),r.a.createElement(b.b,{path:"/notification",exact:!0,render:function(){return r.a.createElement(T,{a:e.showNotiList,notificationList:e.state.notificationList,updateNotificationList:e.updateNotificationList,userName:e.state.userName,groupMember:e.state.groupMember})}})),r.a.createElement(k.u,{slot:"bottom"},r.a.createElement(k.v,{tab:"profile",href:"/profile"},r.a.createElement(k.k,{icon:w.l}),r.a.createElement(k.n,null,"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb")),r.a.createElement(k.v,{tab:"tasklist",href:"/tasklist"},r.a.createElement(k.k,{icon:w.h}),r.a.createElement(k.n,null,"\u8ab2\u984c\u30ea\u30b9\u30c8")),r.a.createElement(k.v,{tab:"notification",href:"/notification"},r.a.createElement(k.k,{icon:w.k}),r.a.createElement(k.n,null,"\u901a\u77e5"))))))}}]),n}(r.a.Component),C=Object(k.I)(_);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[64,3,4]]]);
//# sourceMappingURL=main.f6346b3e.chunk.js.map